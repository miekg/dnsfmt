.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "DNSFMT" 1 "April 2024" "System Administration" "DNS"

.SH "NAME"
.PP
dnsfmt \- format DNS zone files

.SH "SYNOPSIS"
.PP
\fBdnsfmt\fP [\fBFILE\fP]...

.SH "DESCRIPTION"
.PP
\fBDnsfmt\fP formats zone file from \fBFILE\fP. If no file is given, it reads from standard input.

.PP
The zone is formatted according to the following rules:

.IP \(bu 4
ordering of the zone is left as\-is
.IP \(bu 4
all whitespace is removed
.IP \(bu 4
unnecessary origins from names are stripped
.IP \(bu 4
a new comments gets an empty line before it
.IP \(bu 4
a new ownername gets an empty line before it
.IP \(bu 4
repeated ownernames are suppressed
.IP \(bu 4
TTLs are \fIall\fP converted to human readable form (on minute accuracy) when they are larger than 600
.IP \(bu 4
long records (DNSKEYs, RRSIGs) are wrapped and placed in braces
.IP \(bu 4
names with only one, but equal, type are grouped together without newlines


.PP
No semantic checks are done, this is purely text manipulation with some basic zone file syntax
understanding.

.SH "OPTIONS"
.TP
\fB\fC-o\fR \fBORIGIN\fP
Begin parsing with origin set to \fBORIGIN\fP


.SH "EXAMPLE"
.PP
.RS

.nf
% cat <<'EOF' | ./dnsfmt
$TTL 6H
$ORIGIN example.org.
@       IN      SOA     ns miek.miek.nl. 1282630067  4H 1H 7D 4H
                IN      NS  ns
example.org.            IN      NS  ns\-ext.nlnetlabs.nl.
EOF

.fi
.RE

.PP
Returns:

.PP
.RS

.nf
$TTL 6H
$ORIGIN example.org.
@                 IN   SOA        ns miek.miek.nl. (
                                     1282630067   ; serial
                                     4H           ; refresh
                                     1H           ; retry
                                     7D           ; expire
                                     4H           ; minimum
                                  )
                  IN   NS         ns
                  IN   NS         ns\-ext.nlnetlabs.nl.

.fi
.RE

.SH "AUTHOR"
.PP
Miek Gieben miek@miek.nl
\[la]mailto:miek@miek.nl\[ra].

